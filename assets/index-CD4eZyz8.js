import{v as p,w as $,b3 as j,b4 as R,b5 as L,b6 as N,b7 as T,f,y as w,h as m,R as B,b8 as G,b9 as E,d as V,e as k,j as v,k as y,_ as S,ba as C,u as l,N as u,a5 as x}from"./index-CNM7-QZh.js";function D(o,n={}){const t=p(),e=(t==null?void 0:t.proxy)||{};function s(c,i={}){$.report(c,{...i,...n})}s(o,{a:e.a})}var O={};const b=!!O.VUE_APP_RUN_UNIT_TEST;var F=(o=>(o[o.Google=1]="Google",o[o.Facebook=2]="Facebook",o[o.Account=3]="Account",o[o.Ticket=4]="Ticket",o))(F||{});async function H(o,...n){switch(o){case 1:return M(...n);case 2:return J(...n);case 3:return d(...n);case 4:return K(...n);default:j({err:"unknown login type",data:o})}}const r={display_uid:142059725,password:111111};async function M(o,n=b){return n?d(r.display_uid.toString(),r.password.toString()):T(o)}async function J(o,n,t=b){return t?d(r.display_uid.toString(),r.password.toString()):N(o,n)}async function K(o,n=b){return n?d(r.display_uid.toString(),r.password.toString()):R(o)}async function d(o,n){return L(o,n)}function W(){w("home",p()),m(()=>{console.log("test onMounted"),D("test_report_ow",{is_a:!1}),setTimeout(()=>{var o,n,t;console.log("v1ref",g.value,(o=g.value)==null?void 0:o.triggerError),(t=(n=g.value)==null?void 0:n.triggerError)==null||t.call(n,"test error")},1e3)})}function q(){console.log("say hello")}const z={sayHello:q};async function Q(o){console.log("google login tokan",o);const n=await H(F.Google,o);console.log("google login userInfo",n),B("onGoogleLogin"+o)}const X=f("v1"),Y=f(""),g=f(null),Z={};function oo(){const o=p(),n=E(),t=n.compId?"google_login_btn_".concat(n.compId):"google_login_btn";return w(t,o),n}function no(){const o=oo(),n=f(),t={},e="https://apis.google.com/js/platform.js",s="532022495714-s5hikassju5bdbsmsfc277pt4ro2ff9l.apps.googleusercontent.com";async function c(a){if(!window.gapi)throw B("google sdk not ready"),new Error("gapi not found");return new Promise(P=>{window.gapi.load("auth2",()=>{const I=window.gapi.auth2.init({client_id:s});I&&I.attachClickHandler(a,{},_=>{const{id_token:U}=_.getAuthResponse();o.click(U)},_=>{console.warn(JSON.stringify(_,void 0,2))}),P(!0)})})}async function i(){if(await V.addDynamicScript(e),!window.gapi)return i()}async function A(a){await i(),await c(a)}return m(()=>{if(n.value){const a=n.value;A(a)}}),G(()=>{}),{expose:t,btnRef:n,...Z}}const to=k({__name:"index",props:{compId:{},click:{type:Function}},setup(o,{expose:n}){const{btnRef:t,expose:e}=no();return n(e),(s,c)=>(y(),v("div",{class:"google-login-btn",ref_key:"btnRef",ref:t,id:"google-login-btn"},null,512))}}),eo=S(to,[["__scopeId","data-v-39624a28"]]);var h={};function so(){const o=p(),n=E(),t=n.compId?"input_".concat(n.compId):"input";return w(t,o),n}function co(){const o=so();async function n(){const c=await ro();o.click(c)}const t={login2:n},e={logOut:ao};m(()=>{io()});const s=o.isTest?{...t,...e}:e;return{...t,expose:s}}function io(){(function(o,n,t){let e,s=o.getElementsByTagName(n)[0];o.getElementById(t)||(e=o.createElement(n),e.id=t,e.src="https://connect.facebook.net/en_US/sdk.js",s&&s.parentNode.insertBefore(e,s))})(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){const o=h.VUE_APP_FLAVOR2==="ludo"?"462662855828218":h.VUE_APP_IS_DIWANIA?"7953232924746525":"297601757621370",n="v6.0";console.log("facebook-jssdk",o),window.FB.init({appId:o,xfbml:!0,version:n}),window.FB.AppEvents.logPageView()}}async function ro(){return new Promise(o=>{var n;console.log("fb login"),(n=window.FB)==null||n.login(t=>{console.log("facebook login response",t);const{authResponse:e}=t;if(e){const{accessToken:s,userID:c}=e;o({accessToken:s,userID:c})}else C("user canceled")})})}function ao(o){console.log("logOut"),o=o||function(){};try{window.FB.logout(o)}catch(n){console.error("FB logout error:",n)}}const lo=k({__name:"index",props:{compId:{},isTest:{type:Boolean},click:{type:Function}},setup(o,{expose:n}){const{expose:t,login2:e}=co();return n(t),(s,c)=>(y(),v("div",{class:"facebook-login-btn",onClick:c[0]||(c[0]=(...i)=>l(e)&&l(e)(...i))}))}}),uo=S(lo,[["__scopeId","data-v-da8c36a2"]]),go={class:"test-c"},fo=k({__name:"index",props:{compId:{}},setup(o,{expose:n}){return W(),n(z),(t,e)=>(y(),v("div",go,[u(x,{class:"my-input",value:l(X),ref_key:"v1ref",ref:g},null,8,["value"]),u(x,{class:"my-input input-2",value:l(Y),"icon-class":"icon-2"},null,8,["value"]),u(eo,{style:{marginTop:"20px"},click:l(Q)},null,8,["click"]),u(uo,{style:{marginTop:"20px"},click:t.onFBLogin},null,8,["click"])]))}});export{fo as default};
