import{e as T,d,aJ as E,_ as $,j as _,k as n,n as k,s as i,H as O,I as H,l as P,t as h,aK as q,aL as K,aM as Q,aN as I,aO as C,aP as R,S as o,aQ as L,x as g,aR as D,aS as N,aT as F,aU as M,aH as z,U as G,aV as Z,aW as B,aX as x,aY as ee,aZ as se,P as V,a8 as J,ay as v,O as Y,q as te,Q as ae}from"./index-CI_Y42Ai.js";import{p as ie}from"./model-DcVbOsGA.js";const oe=T({props:["type","pc"],methods:{},computed:{tname(){return d.matchExpr(this.type,[[E.PayerMax,"-payermax"],[E.Checkout,"-checkout"]],()=>"")||""}}});function ne(e,s,t,a,r,l){return i(),_("div",{class:k(["cview",{"-pc":e.pc}])},[n("div",{class:k(["cviewIcon",e.tname])},null,2),s[0]||(s[0]=n("div",{class:"cviewDeco"},[n("i")],-1))],2)}const re=$(oe,[["render",ne]]);var de={VUE_APP_BASE_URL:"https://arab-pk.badambiz.com/",VUE_APP_ENV:"production",VUE_APP_LANGUAGE:"ar",VUE_APP_PROJ_NAME:"",VUE_APP_DEPLOY_SERVER:"ar",VUE_APP_DEPLOY_SERVER_DIST:"",VUE_APP_PROXY_URL:"https://test20-pk.badambiz.com/",VUE_APP_PUBLIC_PATH:"/",VUE_APP_CDN_PATH:"https://sawa-official.github.io/",VUE_APP_TRANSLATE_PROJ:"sawa-h5",VUE_APP_TRANSLATE_SHEET:"sawa官网优化",VUE_APP_TRANSLATE_DOCUMENT:"",VUE_APP_TRANSLATE_SHEET_LANG:"",VUE_APP_FLAVOR:"ksa",VUE_APP_DEPLOY:"github",VUE_APP_SUFFIX:"mobile",VUE_APP_CWD:"代表项目本地根目录不要尝试改变这个值否则你会被炒鱿鱼",VUE_APP_EXTERNALS:"",VUE_APP_ICON:"https://oss-pk-arab.badambiz.com/4c9334bb9c4d7bd3389f9ac272dcf7dc_logo_ksa.ico",VUE_APP_TITLE:"SawaKSA",VUE_APP_SOURCEMAP:"false",VUE_APP_DISABLE_CSS_MODULE:"false",VUE_APP_RELEASE_URL:"https://arab-pk-release.badambiz.com/",VUE_APP_DIST:"dist/mobile",VUE_APP_VERSION:"1.0.333",VITE_APP_TEST:1,VUE_APP_NO_GEN_INDEX_HTML:"true",VUE_APP_WEBSITE_VERSION:"1.0.337"};const _e=T({props:["type"],methods:{},computed:{iconsV(){try{return ie[this.type][de.VUE_APP_FLAVOR]}catch(e){return[]}}}}),ce={class:"bview"};function le(e,s,t,a,r,l){return i(),_("div",ce,[(i(!0),_(O,null,H(e.iconsV,(c,m)=>(i(),_("div",{class:k(["bviewIcon","-"+c]),key:m},null,2))),128))])}const ue=$(_e,[["render",le]]),pe=T({props:["succeed","title","desc"],methods:{},computed:{iconV(){return this.succeed?"-succeed":"-failed"}}}),ye={class:"rview"},he={class:"rviewTitle"},me={key:0,class:"rviewDesc"},fe={class:"rviewDesc"};function ge(e,s,t,a,r,l){return i(),_("div",ye,[n("div",{class:k(["rviewIcon",e.iconV])},null,2),n("div",he,h(e.title),1),e.desc?(i(),_("div",me,h(e.desc),1)):P("",!0),n("div",fe,[q(e.$slots,"default")])])}const Pe=$(pe,[["render",ge]]),Ee=T({props:["succeed","title","desc"],methods:{_T:d._T,onConfirm(){this.close(),window.location.reload()},close(){this.$parent.show=!1}},computed:{iconV(){return this.succeed?"-succeed":"-failed"}}}),Ae={class:"rmodal"},be={class:"rmodalTitle"};function Te(e,s,t,a,r,l){return i(),_("div",Ae,[n("div",be,h(e._T("罚款金额发生改变，请刷新")),1),n("div",{class:"rmodalBtn",onClick:s[0]||(s[0]=(...c)=>e.onConfirm&&e.onConfirm(...c))},h(e._T("刷新")),1)])}const X=$(Ee,[["render",Te]]),$e=T({components:{ChannelView:re,BankViews:ue,ResultView:Pe},data(){return{loaded:!1,hasResult:!1,succeed:!1,broken:!1,refund_amount:0,display_uid:0,channels:d.getArgsFromUrl("open_payermax")?[E.Checkout,E.PayerMax]:[E.Checkout],channelSelected:E.Checkout,rules:[d._T("系统会根据用户账号的退款金额计算需要缴纳的罚款金额。成功缴纳罚款后，账号将会自动解封。账号内因退款而被扣除的钻石不予返还，若账号内钻石因退款而扣至负数，需要额外补纳相应差额。"),d._T("根据账号的退款封号次数，罚金的金额会不断翻倍。"),d._T("若对于解封账号或解封规则有疑问，请联系Sawa官方人员（WhatsApp：+20 1080541454）")],isCharging:!1}},mounted(){this.init()},methods:{_T:d._T,textWithRTL:d.textWithRTL,sprintf:d.sprintf,init(){const e=d.getArgsFromUrl("result");if(e!==null){if(this.succeed=String(e)==="0",!localStorage.getItem("last_display_uid")&&this.succeed){this.broken=!0,this.loaded=!0;return}const s=d.getArgsFromUrl("ext");let t=0,a=0;try{const r=JSON.parse(s);console.log("extObj",r),t=r.display_uid||localStorage.getItem("last_display_uid"),a=r.pay_at,a&&t&&(localStorage.getItem("rt_".concat(t,"_").concat(a))?this.succeed?(this.broken=!0,this.loaded=!0):this.$router.push({name:"fines",query:{id:localStorage.getItem("last_id")}}):(localStorage.setItem("rt_".concat(t,"_").concat(a),"1"),this.succeed&&this.reportPage("支付成功页面")))}catch(r){}finally{this.display_uid=t,this.broken||(this.hasResult=!0)}return}this.reportPage("支付页面"),this.getInfo()},async getInfo(){const e=d.getArgsFromUrl("id")||0;localStorage.setItem("last_id",e.toString()),localStorage.setItem("last_display_uid","");const[s,{result:t,data:a}]=await ee(e);if(this.loaded=!0,!s||t!==0){t===21260&&(this.broken=!0);return}this.refund_amount=a.refund_amount,this.display_uid=a.display_uid,localStorage.setItem("last_display_uid",a.display_uid)},async onCreateFines(){var s,t,a,r;if(this.isCharging)return;this.isCharging=!0;let e;B().source===1?e="独立端":B().source===4?e="内嵌ludo":B().source===8&&(e="Diwania"),I(C.click_recharge,{h5_deviceid:M(),act_from:F(),login_source:N(),is_login:!!g().skey,duration:0,other_id:this.display_uid,source:"罚款解封页面",type:D(),number:0,amount:this.refund_amount,page:"罚款解封页面",website_version:se(),display_uid:(s=g().user)==null?void 0:s.uid,pay_distinct_id:Number((t=o().pay2User)==null?void 0:t.uid),pay_display_uid:String((a=o().pay2User)==null?void 0:a.display_uid),session_id:L(!0),good_id:(((r=o().currentPayItem)==null?void 0:r.payItemDisplayMethods[0].methods[0].recharge_id)||0).toString(),is_support_applepay:R(),is_gray:!!x(),app_type:e,is_auto:!1}),d.matchExpr(this.channelSelected,[[E.Checkout,this.onCreateCheckout],[E.PayerMax,this.onCreatePayermax]])},async onCreatePayermax(){var s,t,a,r,l,c,m,A,u,f,w,U;const e=Date.now();try{const p=d.getArgsFromUrl("id")||"",[b,{result:y,data:S,message:W}]=await Z({id:p,amount:this.refund_amount,ext:await this.getExt()});if(await I(C.h5_create_pay_result,{h5_deviceid:M(),act_from:F(),login_source:N(),is_login:!!g().skey,duration:Date.now()-e,source:"罚款解封页面",type:D(),page:"罚款解封页面",is_succeed:b&&y===0,fail_reason:b&&y===0?"":"".concat(y,":").concat(W),display_uid:(s=g().user)==null?void 0:s.uid,pay_distinct_id:Number((t=o().pay2User)==null?void 0:t.uid),pay_display_uid:String((a=o().pay2User)==null?void 0:a.display_uid),session_id:L(),good_id:(((r=o().currentPayItem)==null?void 0:r.payItemDisplayMethods[0].methods[0].recharge_id)||0).toString(),amount:((l=o().currentPayItem)==null?void 0:l.amount)||0,number:((c=o().currentPayItem)==null?void 0:c.coin)||0,is_support_applepay:R()}),this.isCharging=!1,!b||y!==0){if(y===21262){z(X,{});return}G(d._T("提交失败，请联系客服人员"));return}S.url&&(this.isCharging=!0,window.location.href=S.url)}catch(p){console.error(p),this.isCharging=!1,await I(C.h5_create_pay_result,{h5_deviceid:M(),act_from:F(),login_source:N(),is_login:!!g().skey,duration:Date.now()-e,source:"罚款解封页面",type:D(),page:"罚款解封页面",is_succeed:!1,fail_reason:(p==null?void 0:p.message)||"",display_uid:(m=g().user)==null?void 0:m.uid,pay_distinct_id:Number((A=o().pay2User)==null?void 0:A.uid),pay_display_uid:String((u=o().pay2User)==null?void 0:u.display_uid),session_id:L(),good_id:(((f=o().currentPayItem)==null?void 0:f.payItemDisplayMethods[0].methods[0].recharge_id)||0).toString(),amount:(w=o().currentPayItem)==null?void 0:w.amount,number:((U=o().currentPayItem)==null?void 0:U.coin)||0,is_support_applepay:R()})}},async onCreateCheckout(){var s,t,a,r,l,c,m,A,u,f,w,U;const e=Date.now();try{const p=d.getArgsFromUrl("id")||"",[b,{result:y,data:S,message:W}]=await Q({id:p,amount:this.refund_amount,ext:await this.getExt()});if(await I(C.h5_create_pay_result,{h5_deviceid:M(),act_from:F(),login_source:N(),is_login:!!g().skey,duration:Date.now()-e,source:"罚款解封页面",type:D(),page:"罚款解封页面",is_succeed:b&&y===0,fail_reason:b&&y===0?"":"".concat(y,":").concat(W),display_uid:(s=g().user)==null?void 0:s.uid,pay_distinct_id:Number((t=o().pay2User)==null?void 0:t.uid),pay_display_uid:String((a=o().pay2User)==null?void 0:a.display_uid),session_id:L(),good_id:(((r=o().currentPayItem)==null?void 0:r.payItemDisplayMethods[0].methods[0].recharge_id)||0).toString(),amount:(l=o().currentPayItem)==null?void 0:l.amount,number:((c=o().currentPayItem)==null?void 0:c.coin)||0,is_support_applepay:R()}),this.isCharging=!1,console.log("ret",y,S),!b||y!==0){if(y===21262){z(X,{});return}G(d._T("提交失败，请联系客服人员"));return}S.url&&(this.isCharging=!0,window.location.href=S.url)}catch(p){console.error(p),this.isCharging=!1,await I(C.h5_create_pay_result,{h5_deviceid:M(),act_from:F(),login_source:N(),is_login:!!g().skey,duration:Date.now()-e,source:"罚款解封页面",type:D(),page:"罚款解封页面",is_succeed:!1,fail_reason:(p==null?void 0:p.message)||"",display_uid:(m=g().user)==null?void 0:m.uid,pay_distinct_id:Number((A=o().pay2User)==null?void 0:A.uid),pay_display_uid:String((u=o().pay2User)==null?void 0:u.display_uid),session_id:L(),good_id:(((f=o().currentPayItem)==null?void 0:f.payItemDisplayMethods[0].methods[0].recharge_id)||0).toString(),amount:(w=o().currentPayItem)==null?void 0:w.amount,number:((U=o().currentPayItem)==null?void 0:U.coin)||0,is_support_applepay:R()})}},reportPage(e){d.reportWebSensors("h5_pay_fines_page_show",{page:e})},async getExt(){return JSON.stringify(await K())}}}),we={class:"finesPage"},Se={key:1,class:"fhead"},Ve=["innerHTML"],ve={class:"fhead__fee"},ke={key:2,class:"fbody"},Ue={class:"fbodyWay"},Ie={class:"fbodyWay__way"},Ce={class:"fbodyWay__wayTitle"},Re={class:"fbodyWay__wayItems"},Le={class:"fbodyWay__bank"},De={class:"fbodyWay__bankTitle"},Ne={class:"fAbout"},Fe={class:"fAbout__title"},Me={class:"fAbout__itemNum"},Oe=["innerHTML"];function We(e,s,t,a,r,l){const c=v("ResultView"),m=v("ChannelView"),A=v("BankViews");return i(),_("div",we,[e.loaded?(i(),_(O,{key:0},[e.broken?(i(),V(c,{key:0,title:e._T("链接失效"),succeed:!1},{default:J(()=>[te(h(e.textWithRTL(e._T("本链接已失效，有任何疑问请反馈给Sawa官方人员"))),1)]),_:1},8,["title"])):P("",!0),e.broken?P("",!0):(i(),_("div",Se,[e.display_uid?(i(),_("div",{key:0,class:"fhead__id",innerHTML:e.textWithRTL(e.sprintf(e._T("解封账号 {n} 需要缴纳罚款金额"),{n:"<i>ID ".concat(e.display_uid,"</i>")}))},null,8,Ve)):P("",!0),n("div",ve,"$"+h(e.refund_amount),1)])),e.broken?P("",!0):(i(),_("div",ke,[n("div",Ue,[n("div",Ie,[n("div",Ce,h(e._T("充值渠道")),1),n("div",Re,[(i(!0),_(O,null,H(e.channels,(u,f)=>(i(),V(m,{class:k(["fbodyWay__wayItem",{"-on":u===e.channelSelected}]),type:u,onClick:w=>e.channelSelected=u,key:f},null,8,["class","type","onClick"]))),128))])]),s[1]||(s[1]=n("div",{class:"fbodyWay__hr"},null,-1)),n("div",Le,[n("div",De,h(e._T("可用充值方式")),1),Y(A,{type:e.channelSelected},null,8,["type"])])]),n("div",{class:"fConfirm",onClick:s[0]||(s[0]=(...u)=>e.onCreateFines&&e.onCreateFines(...u))},[n("i",null,h(e._T("支付罚款")),1)]),n("div",Ne,[n("div",Fe,h(e._T("解封规则说明")),1),(i(!0),_(O,null,H(e.rules,(u,f)=>(i(),_("div",{class:"fAbout__item",key:f},[n("div",Me,h(f+1),1),n("div",{class:k(["fAbout__itemText",{"-center":f===2}])},h(e.textWithRTL(u)),3)]))),128))])]))],64)):P("",!0),e.hasResult?(i(),_(O,{key:1},[e.succeed?(i(),V(c,{key:0,title:e._T("支付成功"),succeed:!0},{default:J(()=>[n("div",{innerHTML:e.textWithRTL(e.sprintf(e._T("用户账号 {n} 将在几分钟内解封，请耐心等待"),{n:"<i>(ID: ".concat(e.display_uid||"-",")</i>")}))},null,8,Oe)]),_:1},8,["title"])):P("",!0),e.succeed?P("",!0):(i(),V(c,{key:1,title:e._T("支付失败"),succeed:!1},null,8,["title"]))],64)):P("",!0)])}const j=$($e,[["render",We]]),Be=T({components:{MobileView:j},data(){return{}},mounted(){},methods:{}}),He={class:"pcFines"};function ze(e,s,t,a,r,l){const c=v("MobileView");return i(),_("div",He,[Y(c)])}const Ge=$(Be,[["render",ze]]),Je=T({components:{PcFines:Ge,MobileFines:j},data(){return{isPc:ae()}}}),Xe={class:"fineWrap"};function Ye(e,s,t,a,r,l){const c=v("PcFines"),m=v("MobileFines");return i(),_("div",Xe,[e.isPc?(i(),V(c,{key:0})):(i(),V(m,{key:1}))])}const Ke=$(Je,[["render",Ye],["__scopeId","data-v-d5a45da2"]]);export{Ke as default};
