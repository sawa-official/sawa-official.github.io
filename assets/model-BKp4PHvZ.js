import{aX as k,f as C,e as tt,j as $,k as N,J as et,l as V,O as nt,m as F,u as R,i as rt,x as M,q as ot,t as it,d as B,n as at,_ as st,v as J,w as ut,aY as ft,y as lt,aZ as ct,c as Y,h as ht,a_ as dt,ar as K,R as T,a$ as pt,at as gt,ap as yt,b0 as mt,b1 as _t,b2 as vt}from"./index-CNM7-QZh.js";import{s as P,S as bt,a as X}from"./index-DirW3z5N.js";const At=k("feedback",()=>{let s=C(""),p=C(!1),g=C({}),h=C(null),f=C(new Map),m=C([]);function v(y){s.value=y}function A(y){p.value=y}function I(y){g.value=y}function D(y){h.value=y}function E(y){f.value=y}function O(y){m.value.push(y)}function x(y){m.value=y}return{feedbackContent:s,setFeedbackContent:v,canSubmit:p,setCanSubmit:A,userInfo:g,setUserInfo:I,fileInput:h,setFileInput:D,fileInfoMap:f,setFileInfoMap:E,fileList:m,addFile:O,setFileList:x}});var Et={VUE_APP_FLAVOR:"ksa"};const St={class:"pcNav"},It={class:"pcNavInner"},wt={key:1,class:"btn-login"},Rt=tt({__name:"index.pc",props:{title:{}},emits:["toLogin"],setup(s,{emit:p}){const g=p,h=Et.VUE_APP_FLAVOR;function f(){P.value?(console.log("side login",X.value),X.value.close(),P.value=!1):M().skey?P.value=!0:g("toLogin")}return(m,v)=>{var A,I;return N(),$(et,null,[V("div",St,[V("div",It,[R(rt)?F("",!0):(N(),$("div",{key:0,class:"nameC",onClick:f},[(A=R(M)().user)!=null&&A.icon?(N(),$("div",{key:0,class:"avatar",style:ot(R(M)().skey?{backgroundImage:"url(".concat((I=R(M)().user)==null?void 0:I.icon,")")}:{})},null,4)):(N(),$("div",wt,it(R(B._T)("去登录")),1))])),V("div",{class:at(R(h)==="ksa"?"logoD":"logoC")},null,2)])]),R(P)?(N(),nt(bt,{key:0,ref_key:"sideLogin",ref:X,show:R(P)},null,8,["show"])):F("",!0)],64)}}}),Mt=st(Rt,[["__scopeId","data-v-94877188"]]);function Lt(s,p={}){const g=J(),h=(g==null?void 0:g.proxy)||{};function f(m,v={}){ut.report(m,{...v,...p})}s==="test_report_ow"&&f(s,{a:h.a})}var q;(function(s){s.LOAD="LOAD",s.EXEC="EXEC",s.FFPROBE="FFPROBE",s.WRITE_FILE="WRITE_FILE",s.READ_FILE="READ_FILE",s.DELETE_FILE="DELETE_FILE",s.RENAME="RENAME",s.CREATE_DIR="CREATE_DIR",s.LIST_DIR="LIST_DIR",s.DELETE_DIR="DELETE_DIR",s.ERROR="ERROR",s.DOWNLOAD="DOWNLOAD",s.PROGRESS="PROGRESS",s.LOG="LOG",s.MOUNT="MOUNT",s.UNMOUNT="UNMOUNT"})(q||(q={}));var G;(function(s){s.MEMFS="MEMFS",s.NODEFS="NODEFS",s.NODERAWFS="NODERAWFS",s.IDBFS="IDBFS",s.WORKERFS="WORKERFS",s.PROXYFS="PROXYFS"})(G||(G={}));var Z={exports:{}};(function(s,p){(function(g){s.exports=g()})(function(g){var h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function f(i,o){var e=i[0],t=i[1],r=i[2],n=i[3];e+=(t&r|~t&n)+o[0]-680876936|0,e=(e<<7|e>>>25)+t|0,n+=(e&t|~e&r)+o[1]-389564586|0,n=(n<<12|n>>>20)+e|0,r+=(n&e|~n&t)+o[2]+606105819|0,r=(r<<17|r>>>15)+n|0,t+=(r&n|~r&e)+o[3]-1044525330|0,t=(t<<22|t>>>10)+r|0,e+=(t&r|~t&n)+o[4]-176418897|0,e=(e<<7|e>>>25)+t|0,n+=(e&t|~e&r)+o[5]+1200080426|0,n=(n<<12|n>>>20)+e|0,r+=(n&e|~n&t)+o[6]-1473231341|0,r=(r<<17|r>>>15)+n|0,t+=(r&n|~r&e)+o[7]-45705983|0,t=(t<<22|t>>>10)+r|0,e+=(t&r|~t&n)+o[8]+1770035416|0,e=(e<<7|e>>>25)+t|0,n+=(e&t|~e&r)+o[9]-1958414417|0,n=(n<<12|n>>>20)+e|0,r+=(n&e|~n&t)+o[10]-42063|0,r=(r<<17|r>>>15)+n|0,t+=(r&n|~r&e)+o[11]-1990404162|0,t=(t<<22|t>>>10)+r|0,e+=(t&r|~t&n)+o[12]+1804603682|0,e=(e<<7|e>>>25)+t|0,n+=(e&t|~e&r)+o[13]-40341101|0,n=(n<<12|n>>>20)+e|0,r+=(n&e|~n&t)+o[14]-1502002290|0,r=(r<<17|r>>>15)+n|0,t+=(r&n|~r&e)+o[15]+1236535329|0,t=(t<<22|t>>>10)+r|0,e+=(t&n|r&~n)+o[1]-165796510|0,e=(e<<5|e>>>27)+t|0,n+=(e&r|t&~r)+o[6]-1069501632|0,n=(n<<9|n>>>23)+e|0,r+=(n&t|e&~t)+o[11]+643717713|0,r=(r<<14|r>>>18)+n|0,t+=(r&e|n&~e)+o[0]-373897302|0,t=(t<<20|t>>>12)+r|0,e+=(t&n|r&~n)+o[5]-701558691|0,e=(e<<5|e>>>27)+t|0,n+=(e&r|t&~r)+o[10]+38016083|0,n=(n<<9|n>>>23)+e|0,r+=(n&t|e&~t)+o[15]-660478335|0,r=(r<<14|r>>>18)+n|0,t+=(r&e|n&~e)+o[4]-405537848|0,t=(t<<20|t>>>12)+r|0,e+=(t&n|r&~n)+o[9]+568446438|0,e=(e<<5|e>>>27)+t|0,n+=(e&r|t&~r)+o[14]-1019803690|0,n=(n<<9|n>>>23)+e|0,r+=(n&t|e&~t)+o[3]-187363961|0,r=(r<<14|r>>>18)+n|0,t+=(r&e|n&~e)+o[8]+1163531501|0,t=(t<<20|t>>>12)+r|0,e+=(t&n|r&~n)+o[13]-1444681467|0,e=(e<<5|e>>>27)+t|0,n+=(e&r|t&~r)+o[2]-51403784|0,n=(n<<9|n>>>23)+e|0,r+=(n&t|e&~t)+o[7]+1735328473|0,r=(r<<14|r>>>18)+n|0,t+=(r&e|n&~e)+o[12]-1926607734|0,t=(t<<20|t>>>12)+r|0,e+=(t^r^n)+o[5]-378558|0,e=(e<<4|e>>>28)+t|0,n+=(e^t^r)+o[8]-2022574463|0,n=(n<<11|n>>>21)+e|0,r+=(n^e^t)+o[11]+1839030562|0,r=(r<<16|r>>>16)+n|0,t+=(r^n^e)+o[14]-35309556|0,t=(t<<23|t>>>9)+r|0,e+=(t^r^n)+o[1]-1530992060|0,e=(e<<4|e>>>28)+t|0,n+=(e^t^r)+o[4]+1272893353|0,n=(n<<11|n>>>21)+e|0,r+=(n^e^t)+o[7]-155497632|0,r=(r<<16|r>>>16)+n|0,t+=(r^n^e)+o[10]-1094730640|0,t=(t<<23|t>>>9)+r|0,e+=(t^r^n)+o[13]+681279174|0,e=(e<<4|e>>>28)+t|0,n+=(e^t^r)+o[0]-358537222|0,n=(n<<11|n>>>21)+e|0,r+=(n^e^t)+o[3]-722521979|0,r=(r<<16|r>>>16)+n|0,t+=(r^n^e)+o[6]+76029189|0,t=(t<<23|t>>>9)+r|0,e+=(t^r^n)+o[9]-640364487|0,e=(e<<4|e>>>28)+t|0,n+=(e^t^r)+o[12]-421815835|0,n=(n<<11|n>>>21)+e|0,r+=(n^e^t)+o[15]+530742520|0,r=(r<<16|r>>>16)+n|0,t+=(r^n^e)+o[2]-995338651|0,t=(t<<23|t>>>9)+r|0,e+=(r^(t|~n))+o[0]-198630844|0,e=(e<<6|e>>>26)+t|0,n+=(t^(e|~r))+o[7]+1126891415|0,n=(n<<10|n>>>22)+e|0,r+=(e^(n|~t))+o[14]-1416354905|0,r=(r<<15|r>>>17)+n|0,t+=(n^(r|~e))+o[5]-57434055|0,t=(t<<21|t>>>11)+r|0,e+=(r^(t|~n))+o[12]+1700485571|0,e=(e<<6|e>>>26)+t|0,n+=(t^(e|~r))+o[3]-1894986606|0,n=(n<<10|n>>>22)+e|0,r+=(e^(n|~t))+o[10]-1051523|0,r=(r<<15|r>>>17)+n|0,t+=(n^(r|~e))+o[1]-2054922799|0,t=(t<<21|t>>>11)+r|0,e+=(r^(t|~n))+o[8]+1873313359|0,e=(e<<6|e>>>26)+t|0,n+=(t^(e|~r))+o[15]-30611744|0,n=(n<<10|n>>>22)+e|0,r+=(e^(n|~t))+o[6]-1560198380|0,r=(r<<15|r>>>17)+n|0,t+=(n^(r|~e))+o[13]+1309151649|0,t=(t<<21|t>>>11)+r|0,e+=(r^(t|~n))+o[4]-145523070|0,e=(e<<6|e>>>26)+t|0,n+=(t^(e|~r))+o[11]-1120210379|0,n=(n<<10|n>>>22)+e|0,r+=(e^(n|~t))+o[2]+718787259|0,r=(r<<15|r>>>17)+n|0,t+=(n^(r|~e))+o[9]-343485551|0,t=(t<<21|t>>>11)+r|0,i[0]=e+i[0]|0,i[1]=t+i[1]|0,i[2]=r+i[2]|0,i[3]=n+i[3]|0}function m(i){var o=[],e;for(e=0;e<64;e+=4)o[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return o}function v(i){var o=[],e;for(e=0;e<64;e+=4)o[e>>2]=i[e]+(i[e+1]<<8)+(i[e+2]<<16)+(i[e+3]<<24);return o}function A(i){var o=i.length,e=[1732584193,-271733879,-1732584194,271733878],t,r,n,a,u,c;for(t=64;t<=o;t+=64)f(e,m(i.substring(t-64,t)));for(i=i.substring(t-64),r=i.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=i.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(f(e,n),t=0;t<16;t+=1)n[t]=0;return a=o*8,a=a.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(a[2],16),c=parseInt(a[1],16)||0,n[14]=u,n[15]=c,f(e,n),e}function I(i){var o=i.length,e=[1732584193,-271733879,-1732584194,271733878],t,r,n,a,u,c;for(t=64;t<=o;t+=64)f(e,v(i.subarray(t-64,t)));for(i=t-64<o?i.subarray(t-64):new Uint8Array(0),r=i.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=i[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(f(e,n),t=0;t<16;t+=1)n[t]=0;return a=o*8,a=a.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(a[2],16),c=parseInt(a[1],16)||0,n[14]=u,n[15]=c,f(e,n),e}function D(i){var o="",e;for(e=0;e<4;e+=1)o+=h[i>>e*8+4&15]+h[i>>e*8&15];return o}function E(i){var o;for(o=0;o<i.length;o+=1)i[o]=D(i[o]);return i.join("")}E(A("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function i(o,e){return o=o|0||0,o<0?Math.max(o+e,0):Math.min(o,e)}ArrayBuffer.prototype.slice=function(o,e){var t=this.byteLength,r=i(o,t),n=t,a,u,c,_;return e!==g&&(n=i(e,t)),r>n?new ArrayBuffer(0):(a=n-r,u=new ArrayBuffer(a),c=new Uint8Array(u),_=new Uint8Array(this,r,a),c.set(_),u)}}();function O(i){return/[\u0080-\uFFFF]/.test(i)&&(i=unescape(encodeURIComponent(i))),i}function x(i,o){var e=i.length,t=new ArrayBuffer(e),r=new Uint8Array(t),n;for(n=0;n<e;n+=1)r[n]=i.charCodeAt(n);return o?r:t}function y(i){return String.fromCharCode.apply(null,new Uint8Array(i))}function W(i,o,e){var t=new Uint8Array(i.byteLength+o.byteLength);return t.set(new Uint8Array(i)),t.set(new Uint8Array(o),i.byteLength),t}function U(i){var o=[],e=i.length,t;for(t=0;t<e-1;t+=2)o.push(parseInt(i.substr(t,2),16));return String.fromCharCode.apply(String,o)}function l(){this.reset()}return l.prototype.append=function(i){return this.appendBinary(O(i)),this},l.prototype.appendBinary=function(i){this._buff+=i,this._length+=i.length;var o=this._buff.length,e;for(e=64;e<=o;e+=64)f(this._hash,m(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},l.prototype.end=function(i){var o=this._buff,e=o.length,t,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n;for(t=0;t<e;t+=1)r[t>>2]|=o.charCodeAt(t)<<(t%4<<3);return this._finish(r,e),n=E(this._hash),i&&(n=U(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(i){return this._buff=i.buff,this._length=i.length,this._hash=i.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(i,o){var e=o,t,r,n;if(i[e>>2]|=128<<(e%4<<3),e>55)for(f(this._hash,i),e=0;e<16;e+=1)i[e]=0;t=this._length*8,t=t.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(t[2],16),n=parseInt(t[1],16)||0,i[14]=r,i[15]=n,f(this._hash,i)},l.hash=function(i,o){return l.hashBinary(O(i),o)},l.hashBinary=function(i,o){var e=A(i),t=E(e);return o?U(t):t},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(i){var o=W(this._buff.buffer,i),e=o.length,t;for(this._length+=i.byteLength,t=64;t<=e;t+=64)f(this._hash,v(o.subarray(t-64,t)));return this._buff=t-64<e?new Uint8Array(o.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(i){var o=this._buff,e=o.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r,n;for(r=0;r<e;r+=1)t[r>>2]|=o[r]<<(r%4<<3);return this._finish(t,e),n=E(this._hash),i&&(n=U(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var i=l.prototype.getState.call(this);return i.buff=y(i.buff),i},l.ArrayBuffer.prototype.setState=function(i){return i.buff=x(i.buff,!0),l.prototype.setState.call(this,i)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(i,o){var e=I(new Uint8Array(i)),t=E(e);return o?U(t):t},l})})(Z);var Bt=Z.exports;const Ot=ft(Bt),H=Y(()=>{let s={};const{user:p,skey:g}=M(),{pay2User:h,pay2Uid:f}=yt();return g&&p?(s={icon:p.icon,nickname:p.nickname,display_uid:p.display_uid,type:"loginAccount",uid:p.uid},s):(h&&(s={icon:h.icon,nickname:h.nickname,display_uid:h.display_uid,type:"rechargeAccount",uid:f||h.uid}),s)});function $t(){lt("feedBack",J());const s={},p=B._T("充值问题反馈"),g=At(),{feedbackContent:h,fileInfoMap:f,fileList:m,fileInput:v}=ct(g),A=Y(()=>{const r=h.value.length>0;console.log("fileInfoMap",f.value);let n=!0;return f.value.forEach(a=>{a.uploaded||(n=!1)}),r&&n});ht(()=>{Dt()}),dt((r,n)=>(r.name!=="login"&&y(),!0));function I(r){if(!v.value){console.log("fileInput is null");return}v.value.click()}async function D(r){const a=r.target.files;let u=a?a.length:0,c=3-m.value.length;c=c<0?0:c,u=Math.min(u,c);for(let _=0;_<u;_++){const d=a?a[_]:null;if(d){if(f.value.has(d.name))return;if(d.type.indexOf("image")>-1){const S=new FileReader;S.onload=async w=>{console.log(" img onload e",w,w.target.result),f.value.set(d.name,{coverUrl:w.target.result,type:d.type,name:d.name,uploaded:!1});const b=await o(d),L=f.value.get(d.name);L&&(L.remoteUrl=b,L.uploaded=!0,f.value.set(d.name,L))},S.readAsDataURL(d),m.value.push(d)}}}}function E(r){f.value.delete(m.value[r].name),m.value.splice(r,1)}function O(r){if(!r)return"";let n=Math.floor(r/3600),a=Math.floor(r/60),u=Math.floor(r%60);return n>0&&(n=n<10?"0"+n:n),a=a<10?"0"+a:a,u=u<10?"0"+u:u,n?"".concat(n,":").concat(a,":").concat(u):"".concat(a,":").concat(u)}function x(){const r=navigator.userAgent;let n="unknown",a="unknown";return/Android/.test(r)?(n="Android",a=/Android ([\d\.]+)/.test(r)?RegExp.$1:"unknown"):/iPhone|iPad|iPod/.test(r)?(n="iOS",a=/OS (\d+)_(\d+)_?(\d+)?/.test(r)?[RegExp.$1,RegExp.$2,RegExp.$3].join("."):"unknown"):/Windows/.test(r)?(n="Windows",a=/Windows NT ([\d\.]+)/.test(r)?RegExp.$1:"unknown"):/Mac OS X/.test(r)&&(n="Mac OS X",a=/Mac OS X (\d+)[_\.](\d+)[_\.]?(\d+)?/.test(r)?[RegExp.$1,RegExp.$2,RegExp.$3].join("."):"unknown"),a&&a[a.length-1]==="."&&(a=a.substring(0,a.length-1)),{os:n,version:a}}function y(){g.setFeedbackContent(""),g.setFileInfoMap(new Map),g.setFileList([])}async function W(){if(!A.value)return;if(!h.value){T(B._T("请输入反馈内容"));return}if(h.value.length>300){T(B._T("文案过长，请调整文案字数"));return}const r=H.value.uid,n=h.value;console.log("submit url:",f.value);let a=[];for(const[j,z]of f.value.entries()){if(!z.remoteUrl)return;const Q=z.remoteUrl||"";a.push(Q)}a=a.filter(j=>j);const{os:u,version:c}=x(),_="".concat(u),d=c,S=B.api.getUUid();console.log("222222");const[w,{result:b,data:L,message:xt}]=await pt(r,n,a,_,d,S);if(w&&b===0){y(),K.push({name:"feedbackSuccess"});return}}function U(r){return Uint8Array.from(r.match(/.{1,2}/g).map(n=>parseInt(n,16)))}function l(r){return new Promise(n=>{try{const a=new FileReader;a.readAsBinaryString(r),a.onload=u=>{if(u.target){const c=Ot.hashBinary(u.target.result),_=U(c);n(btoa(String.fromCharCode.apply(null,_)))}}}catch(a){n("")}})}async function i(r,n,a,u,c=0,_=!1){const d=r.tokens[0],S=JSON.parse(d.headers);for(const b in S){const L=S[b];S[b]=L.join(",")}let w;try{w=await vt.request({url:d.url||"",method:d.method,headers:S,data:a,timeout:3e5}).catch(b=>(console.info("upload2 catch",b),{status:-1e3,data:b.toString()}))}catch(b){return console.info("upload2 err",b),""}if(w.status===200)return console.log("link 222",_,d.result,d.url,""),_?d.result||d.url||"":c<3?i(r,n,a,u,c+1):""}async function o(r){const n=await l(r),a={name:r.name,size:r.size,content_type:r.type,md5:n},u=await mt("audit",[JSON.stringify(a)]);if(_t(u)){const c=await i(u[1].data,r.size,r,null,null,!0);if(console.log("link 111 :",c),c)return c}return""}function e(r){if(!(m.value[r].type.indexOf("image")>-1))return;const a=document.getElementById("largeImage"),u=document.getElementById("overlay");a.src=f.value.get(m.value[r].name).coverUrl,a.classList.add("show_img"),u.style.display="flex"}function t(){const r=document.getElementById("largeImage"),n=document.getElementById("overlay");r.classList.remove("show_img"),n.style.display="none",r.src=""}return{expose:s,feedbackContent:h,title:p,userInfo:H,canSubmit:A,fileInput:v,fileList:m,fileInfoMap:f,report:Lt,close:Ut,submit:W,switchAccount:Ct,triggerFileInput:I,getFile:D,removeFile:E,durationShow:O,showLargePic:e,showSmallPic:t}}function Ut(){console.log("close"),gt({name:"pay"})}function Ct(){K.push({name:"login",query:{from:"feedback"}})}function Dt(){const s=window.innerHeight;B.getPlatform().isIPhone||window.addEventListener("resize",()=>{const p=document.querySelector(".btn-area");if(console.log("resize:",p),p){if(B.getPlatform().isPc)return;window.innerHeight<s?p.style.position="static":p.style.position="fixed"}})}export{Mt as L,$t as s,H as u};
